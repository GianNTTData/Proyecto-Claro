<div class="modal-overlay" (click)="cancelar()">
  <div class="modal-contenido" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Editar Motivo de Devoluci贸n</h2>
      <button type="button" class="btn-cerrar" (click)="cancelar()">&times;</button>
    </div>

    <div class="modal-body">
      <!-- Mensaje de error -->
      <div *ngIf="mensajeError" class="alerta alerta-error">
        {{ mensajeError }}
      </div>

      <form #formulario="ngForm">
        <!-- Descripci贸n del motivo -->
        <div class="campo-formulario">
          <label for="nombreMotivo">
            Descripci贸n del motivo <span class="campo-requerido">*</span>
          </label>
          <input
            type="text"
            id="nombreMotivo"
            name="nombreMotivo"
            [(ngModel)]="nombreMotivo"
            required
            maxlength="100"
            class="input-texto"
            [class.input-error]="errores.nombreMotivo"
            placeholder="Ingrese la descripci贸n del motivo (3-100 caracteres)"
            data-test="input-descripcion"
          />
          <div class="campo-info">
            <span *ngIf="errores.nombreMotivo" class="mensaje-error">
              {{ errores.nombreMotivo }}
            </span>
            <span class="contador-caracteres" [class.texto-advertencia]="nombreMotivo.length > 90">
              {{ nombreMotivo.length }} / 100 caracteres
            </span>
          </div>
        </div>

        <!-- Estado -->
        <div class="campo-formulario">
          <label for="estadoMotivo">
            Estado <span class="campo-requerido">*</span>
          </label>
          <select
            id="estadoMotivo"
            name="estadoMotivo"
            [(ngModel)]="estadoMotivo"
            required
            class="input-select"
            data-test="select-estado"
          >
            <option
              *ngFor="let estadoOption of estadosDisponibles"
              [ngValue]="estadoOption.valor"
            >
              {{ estadoOption.etiqueta }}
            </option>
          </select>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-secundario"
        (click)="cancelar()"
        [disabled]="guardando"
      >
        Cancelar
      </button>
      <button
        type="button"
        class="btn btn-primario"
        (click)="guardar()"
        [disabled]="guardando"
        data-test="guardar-motivo"
      >
        {{ guardando ? 'Guardando...' : 'Guardar' }}
      </button>
    </div>
  </div>
</div>
