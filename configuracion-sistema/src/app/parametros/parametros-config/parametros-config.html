<div class="parametros-container">
  <h1>Configuración de Parámetros</h1>

  <!-- Mensajes -->
  <div class="mensajes">
    <div *ngIf="mensajeExito" class="alerta alerta-exito">
      {{ mensajeExito }}
    </div>
    <div *ngIf="mensajeError" class="alerta alerta-error">
      {{ mensajeError }}
    </div>
  </div>

  <!-- Cargando -->
  <div *ngIf="cargando" class="cargando">
    Cargando configuración...
  </div>

  <!-- Formulario de Configuración -->
  <form *ngIf="!cargando" class="formulario-parametros">
    <!-- Tiempo de Reserva de Mercadería -->
    <div class="seccion-parametro">
      <h2>Tiempo de Reserva de Mercadería</h2>
      <p class="descripcion-parametro">
        Permite configurar la vigencia para una reserva de mercadería
      </p>

      <div class="campos-grid">
        <div class="campo-formulario">
          <label for="reservaCantidad">
            Cantidad <span class="campo-requerido">*</span>
          </label>
          <input
            type="number"
            id="reservaCantidad"
            name="reservaCantidad"
            [(ngModel)]="parametros.cantidadTiempoReserva"
            min="1"
            step="1"
            required
            class="input-numero"
            [class.input-error]="errores.reservaCantidad"
            (keypress)="validarNumero($event)"
            placeholder="Ingrese cantidad"
            data-test="input-reserva-cantidad"
          />
          <span *ngIf="errores.reservaCantidad" class="mensaje-error">
            {{ errores.reservaCantidad }}
          </span>
        </div>

        <div class="campo-formulario">
          <label for="reservaUnidad">
            Unidad de medida <span class="campo-requerido">*</span>
          </label>
          <select
            id="reservaUnidad"
            name="reservaUnidad"
            [(ngModel)]="parametros.unidadMedidaTiempoReserva"
            required
            class="input-select"
            [class.input-error]="errores.reservaUnidad"
            data-test="select-reserva-unidad"
          >
            <option
              *ngFor="let unidad of unidadesMedida"
              [ngValue]="unidad.valor"
            >
              {{ unidad.etiqueta }}
            </option>
          </select>
          <span *ngIf="errores.reservaUnidad" class="mensaje-error">
            {{ errores.reservaUnidad }}
          </span>
        </div>
      </div>
    </div>

    <div class="separador"></div>

    <!-- Tiempo de Desbloqueo de Mercadería -->
    <div class="seccion-parametro">
      <h2>Tiempo de Desbloqueo de Mercadería</h2>
      <p class="descripcion-parametro">
        Permite configurar la vigencia para un desbloqueo de mercadería
      </p>

      <div class="campos-grid">
        <div class="campo-formulario">
          <label for="desbloqueCantidad">
            Cantidad <span class="campo-requerido">*</span>
          </label>
          <input
            type="number"
            id="desbloqueCantidad"
            name="desbloqueCantidad"
            [(ngModel)]="parametros.cantidadTiempoDesbloqueo"
            min="1"
            step="1"
            required
            class="input-numero"
            [class.input-error]="errores.desbloqueCantidad"
            (keypress)="validarNumero($event)"
            placeholder="Ingrese cantidad"
            data-test="input-desbloqueo-cantidad"
          />
          <span *ngIf="errores.desbloqueCantidad" class="mensaje-error">
            {{ errores.desbloqueCantidad }}
          </span>
        </div>

        <div class="campo-formulario">
          <label for="desbloqueoUnidad">
            Unidad de medida <span class="campo-requerido">*</span>
          </label>
          <select
            id="desbloqueoUnidad"
            name="desbloqueoUnidad"
            [(ngModel)]="parametros.unidadMedidaTiempoDesbloqueo"
            required
            class="input-select"
            [class.input-error]="errores.desbloqueoUnidad"
            data-test="select-desbloqueo-unidad"
          >
            <option
              *ngFor="let unidad of unidadesMedida"
              [ngValue]="unidad.valor"
            >
              {{ unidad.etiqueta }}
            </option>
          </select>
          <span *ngIf="errores.desbloqueoUnidad" class="mensaje-error">
            {{ errores.desbloqueoUnidad }}
          </span>
        </div>
      </div>
    </div>

    <!-- Botón Guardar -->
    <div class="acciones-principales">
      <button
        type="button"
        class="btn btn-exito btn-grande"
        (click)="guardarConfiguracion()"
        [disabled]="guardando"
        data-test="guardar-parametros"
      >
        {{ guardando ? 'Guardando...' : 'Guardar Configuración' }}
      </button>
    </div>
  </form>
</div>
